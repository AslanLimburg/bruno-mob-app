# üìã –ü–õ–ê–ù –ù–ê –ó–ê–í–¢–†–ê (28 –û–ö–¢–Ø–ë–†–Ø)

## üî¥ –ö–†–ò–¢–ò–ß–ù–´–ï –ó–ê–î–ê–ß–ò:

### 1. üìß –ù–ê–°–¢–†–û–ò–¢–¨ EMAIL –°–ï–†–í–ò–°

**–í–∞—Ä–∏–∞–Ω—Ç A: Resend (–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)**
```bash
# 1. –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å –Ω–∞ https://resend.com
# 2. –°–æ–∑–¥–∞–π—Ç–µ API –∫–ª—é—á
# 3. –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ:
cd /var/www/brunotoken/backend
nano .env
# –ó–∞–º–µ–Ω–∏—Ç–µ: RESEND_API_KEY=disabled
# –ù–∞: RESEND_API_KEY=re_–≤–∞—à_–∫–ª—é—á_–∑–¥–µ—Å—å

# 4. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ:
pm2 restart bruno-token-backend --update-env
```

**–í–∞—Ä–∏–∞–Ω—Ç B: SMTP (Gmail/Yandex)**
```bash
# –í .env –∑–∞–º–µ–Ω–∏—Ç–µ:
RESEND_API_KEY=disabled
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=–≤–∞—à_email@gmail.com
SMTP_PASS=–≤–∞—à_–ø–∞—Ä–æ–ª—å_–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
```

---

### 2. üß™ –ü–†–û–¢–ï–°–¢–ò–†–û–í–ê–¢–¨ –†–ï–ì–ò–°–¢–†–ê–¶–ò–Æ –° EMAIL

–ü–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ email:
1. –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –ø–∏—Å—å–º–æ –ø—Ä–∏—à–ª–æ
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—é –ø–æ –∫–æ–¥—É
4. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –≤–æ–π—Ç–∏

---

### 3. üóÉÔ∏è –°–û–ó–î–ê–¢–¨ –¢–ê–ë–õ–ò–¶–£ `transactions` (–û–ü–¶–ò–û–ù–ê–õ–¨–ù–û)

–ï—Å–ª–∏ –Ω—É–∂–Ω–∞ –∏—Å—Ç–æ—Ä–∏—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π:

```sql
CREATE TABLE IF NOT EXISTS transactions (
  id SERIAL PRIMARY KEY,
  from_user_id INTEGER REFERENCES users(id),
  to_user_id INTEGER REFERENCES users(id),
  crypto VARCHAR(10) NOT NULL,
  amount DECIMAL(20, 8) NOT NULL,
  fee DECIMAL(20, 8) DEFAULT 0,
  type VARCHAR(50) NOT NULL,
  status VARCHAR(20) DEFAULT 'completed',
  metadata JSONB,
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

CREATE INDEX idx_transactions_from_user ON transactions(from_user_id);
CREATE INDEX idx_transactions_to_user ON transactions(to_user_id);
CREATE INDEX idx_transactions_created_at ON transactions(created_at DESC);
```

–ó–∞—Ç–µ–º —Ä–∞—Å–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –∫–æ–¥ –≤ `walletController.js`.

---

## üß™ –ü–õ–ê–ù –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–Ø:

### –ë–∞–∑–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:
- [ ] –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —Å email –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–µ–π
- [ ] –õ–æ–≥–∏–Ω –ø–æ—Å–ª–µ –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏
- [ ] –õ–æ–≥–∏–Ω –±–µ–∑ –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏ (–¥–æ–ª–∂–µ–Ω –±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å—Å—è)
- [ ] Forgot password
- [ ] Dashboard –∑–∞–≥—Ä—É–∑–∫–∞

### GS-I —Ñ—É–Ω–∫—Ü–∏–∏:
- [ ] Lottery –¥–æ—Å—Ç—É–ø (—Ç—Ä–µ–±—É–µ—Ç GS-I)
- [ ] Challenge –¥–æ—Å—Ç—É–ø (—Ç—Ä–µ–±—É–µ—Ç GS-I)
- [ ] BRT Stars Challenge (—Ç—Ä–µ–±—É–µ—Ç GS-I)
- [ ] Vector Destiny –æ–ø—Ä–æ—Å–Ω–∏–∫
- [ ] Vector Destiny –≥–æ—Ä–æ—Å–∫–æ–ø—ã

### –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ:
- [ ] Messenger (BrunoChat)
- [ ] KYC –∑–∞–≥—Ä—É–∑–∫–∞ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
- [ ] Swap —Ñ—É–Ω–∫—Ü–∏—è
- [ ] Send —Ñ—É–Ω–∫—Ü–∏—è
- [ ] Referral —Å–∏—Å—Ç–µ–º–∞

---

## üîç –ò–ó–í–ï–°–¢–ù–´–ï –ü–†–û–ë–õ–ï–ú–´:

### üü° –°—Ä–µ–¥–Ω–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç:
1. **–¢–∞–±–ª–∏—Ü–∞ `transactions` –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç**
   - –¢–µ–∫—É—â–µ–µ —Ä–µ—à–µ–Ω–∏–µ: `getTransactions` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `[]`
   - –ü–æ—Å—Ç–æ—è–Ω–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ: –°–æ–∑–¥–∞—Ç—å —Ç–∞–±–ª–∏—Ü—É –∏–ª–∏ —É–¥–∞–ª–∏—Ç—å —Ñ—É–Ω–∫—Ü–∏—é

2. **Email –Ω–µ –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è**
   - –¢–µ–∫—É—â–µ–µ —Ä–µ—à–µ–Ω–∏–µ: `RESEND_API_KEY=disabled`
   - –ü–æ—Å—Ç–æ—è–Ω–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ: –ù–∞—Å—Ç—Ä–æ–∏—Ç—å Resend –∏–ª–∏ SMTP

3. **OpenAI –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω**
   - –¢–µ–∫—É—â–µ–µ —Ä–µ—à–µ–Ω–∏–µ: `OPENAI_API_KEY=disabled`
   - –í–ª–∏—è–Ω–∏–µ: –ù–µ—Ç –ø–µ—Ä–µ–≤–æ–¥–æ–≤ –∞–Ω–∫–µ—Ç Vector Destiny, –Ω–µ—Ç –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –≥–æ—Ä–æ—Å–∫–æ–ø–æ–≤
   - –ü–æ—Å—Ç–æ—è–Ω–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ: –ü–æ–ª—É—á–∏—Ç—å API –∫–ª—é—á —Å OpenAI

### üü¢ –ù–∏–∑–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç:
4. **–¢–∞–±–ª–∏—Ü–∞ `user_balances` –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç**
   - –¢–µ–∫—É—â–µ–µ —Ä–µ—à–µ–Ω–∏–µ: –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `users.brt_balance`
   - –í–ª–∏—è–Ω–∏–µ: –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ç–æ–ª—å–∫–æ BRT, –Ω–µ—Ç multi-currency
   - –ü–æ—Å—Ç–æ—è–Ω–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ: –°–æ–∑–¥–∞—Ç—å —Ç–∞–±–ª–∏—Ü—É –∏–ª–∏ –∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–æ–¥ –æ–¥–Ω—É –≤–∞–ª—é—Ç—É

5. **Google OAuth –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω**
   - –¢–µ–∫—É—â–µ–µ —Ä–µ—à–µ–Ω–∏–µ: `GOOGLE_CLIENT_ID=disabled`
   - –í–ª–∏—è–Ω–∏–µ: –ù–µ—Ç –≤—Ö–æ–¥–∞ —á–µ—Ä–µ–∑ Google
   - –ü–æ—Å—Ç–æ—è–Ω–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ: –ù–∞—Å—Ç—Ä–æ–∏—Ç—å Google OAuth credentials

---

## üìÇ BACKUP –ò–ù–§–û–†–ú–ê–¶–ò–Ø:

### –ü–æ—Å–ª–µ–¥–Ω–∏–π backup:
- **–î–∞—Ç–∞:** 27 –æ–∫—Ç—è–±—Ä—è 2025, 19:38
- **–§–∞–π–ª—ã:**
  - –ü—Ä–æ–µ–∫—Ç: `/root/backups/brunotoken-backup-20251027-193807.tar.gz` (1.8 MB)
  - –ë–∞–∑–∞: `/root/backups/brunotoken-db-2025-10-27T16-38-07.sql` (92 KB)

### –ö–∞–∫ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å:
```bash
# –ü—Ä–æ–µ–∫—Ç:
cd /var/www
tar -xzf /root/backups/brunotoken-backup-20251027-193807.tar.gz

# –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö:
PGPASSWORD='root' psql -U back -h localhost brunotoken < /root/backups/brunotoken-db-2025-10-27T16-38-07.sql
```

---

## üöÄ –ë–´–°–¢–†–´–ô –°–¢–ê–†–¢ –ó–ê–í–¢–†–ê:

```bash
# 1. –ü–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –∫ —Å–µ—Ä–≤–µ—Ä—É
ssh root@147.45.157.12

# 2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å
cd /var/www/brunotoken/backend
pm2 status

# 3. –ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –ª–æ–≥–∏
pm2 logs bruno-token-backend --lines 50

# 4. –ù–∞—á–Ω–∏—Ç–µ —Å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ email (—Å–º. —Ä–∞–∑–¥–µ–ª 1)
```

---

## üìû –ö–û–ù–¢–ê–ö–¢–´ –ò –î–û–°–¢–£–ü–´:

- **–°–µ—Ä–≤–µ—Ä:** `147.45.157.12`
- **–î–æ–º–µ–Ω:** `https://brunotoken.com`
- **Backend API:** `https://brunotoken.com/api`
- **SSH:** `root@147.45.157.12`
- **Email:** `aslanlimburg@mail.ru` (–¥–ª—è Certbot)

### –¢–µ—Å—Ç–æ–≤—ã–π –∞–∫–∫–∞—É–Ω—Ç:
- **Email:** `brttoken@gmail.com`
- **Password:** `12345678`
- **Email verified:** ‚úÖ YES

---

## üí° –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–ò:

1. **–ù–∞—á–Ω–∏—Ç–µ —Å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ Resend** - —ç—Ç–æ —Å–∞–º–æ–µ –ø—Ä–æ—Å—Ç–æ–µ —Ä–µ—à–µ–Ω–∏–µ –¥–ª—è email
2. **–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é** –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å —Ä–µ–∞–ª—å–Ω—ã–º email
3. **–°–æ–∑–¥–∞–π—Ç–µ —Ç–∞–±–ª–∏—Ü—É `transactions`** —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –æ–Ω–∞ –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –Ω—É–∂–Ω–∞
4. **OpenAI –∫–ª—é—á** –ø–æ–ª—É—á–∞–π—Ç–µ –≤ –ø–æ—Å–ª–µ–¥–Ω—é—é –æ—á–µ—Ä–µ–¥—å (–Ω–µ –∫—Ä–∏—Ç–∏—á–Ω–æ)

---

**–£–¥–∞—á–∏ –∑–∞–≤—Ç—Ä–∞! üåü**

