# üìã –ò–¢–û–ì–ò –†–ê–ë–û–¢–´: 27 –û–ö–¢–Ø–ë–†–Ø 2025

## üéØ –ì–õ–ê–í–ù–ê–Ø –ó–ê–î–ê–ß–ê: –î–µ–ø–ª–æ–π –Ω–æ–≤–æ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞ –Ω–∞ Timeweb

---

## ‚úÖ –ß–¢–û –°–î–ï–õ–ê–ù–û:

### 1. üöÄ –î–ï–ü–õ–û–ô –ù–ê –°–ï–†–í–ï–†
- ‚úÖ –°—Ç–∞—Ä—ã–π –ø—Ä–æ–µ–∫—Ç –ø–µ—Ä–µ–º–µ—â—ë–Ω –≤ `/var/www/brunotoken-old-20251027`
- ‚úÖ –ù–æ–≤—ã–π –ø—Ä–æ–µ–∫—Ç –∑–∞–≥—Ä—É–∂–µ–Ω –Ω–∞ —Å–µ—Ä–≤–µ—Ä `147.45.157.12`
- ‚úÖ Backend dependencies —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã (`npm install`)
- ‚úÖ Frontend build —Å–æ–±—Ä–∞–Ω –ª–æ–∫–∞–ª—å–Ω–æ –∏ –∑–∞–≥—Ä—É–∂–µ–Ω –Ω–∞ —Å–µ—Ä–≤–µ—Ä

### 2. ‚öôÔ∏è –ù–ê–°–¢–†–û–ô–ö–ê –û–ö–†–£–ñ–ï–ù–ò–Ø
- ‚úÖ `.env` —Ñ–∞–π–ª —Å–æ–∑–¥–∞–Ω —Å –Ω—É–ª—è:
  - Database: `DB_USER=back`, `DB_PASSWORD=root`, `DB_NAME=brunotoken`
  - JWT: `JWT_SECRET=...`
  - Frontend: `FRONTEND_URL=https://brunotoken.com`
  - Google OAuth: `GOOGLE_CLIENT_ID=disabled` (–≤—Ä–µ–º–µ–Ω–Ω–æ)
  - Email: `RESEND_API_KEY=disabled` (–≤—Ä–µ–º–µ–Ω–Ω–æ)
  - OpenAI: `OPENAI_API_KEY=disabled` (–≤—Ä–µ–º–µ–Ω–Ω–æ)
  - Stripe: `STRIPE_KEY=...` (—Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω –∏–∑ —Å—Ç–∞—Ä–æ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞)

### 3. üóÑÔ∏è –ë–ê–ó–ê –î–ê–ù–ù–´–•
- ‚úÖ –í—Å–µ SQL –º–∏–≥—Ä–∞—Ü–∏–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω—ã:
  - `000_create_users_table.sql` - —É–ø—Ä–æ—â—ë–Ω–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
  - `001_create_lottery_tables.sql`
  - `002_create_club_avalanche_tables.sql`
  - `003_create_challenge_tables.sql`
  - `004_create_messenger_tables.sql`
  - `005_create_stars_challenge_tables.sql`
  - `006_create_vector_destiny_tables.sql`
- ‚úÖ –¢–∞–±–ª–∏—Ü–∞ `email_verifications` —Å–æ–∑–¥–∞–Ω–∞ –≤—Ä—É—á–Ω—É—é
- ‚úÖ –¢–∞–±–ª–∏—Ü—ã `messages`, `messenger_contacts`, `payout_jobs` —Å–æ–∑–¥–∞–Ω—ã
- ‚úÖ –ö–æ–ª–æ–Ω–∫–∞ `account_status` –¥–æ–±–∞–≤–ª–µ–Ω–∞ –≤ `users`
- ‚úÖ –ö–æ–ª–æ–Ω–∫–∞ `last_login` –¥–æ–±–∞–≤–ª–µ–Ω–∞ –≤ `users`

### 4. üë• –°–ï–†–í–ò–°–ù–´–ï –ê–ö–ö–ê–£–ù–¢–´
- ‚úÖ –°–æ–∑–¥–∞–Ω—ã 4 —Å–ª—É–∂–µ–±–Ω—ã—Ö –∞–∫–∫–∞—É–Ω—Ç–∞:
  - `admin@brunotoken.com` (–ø–∞—Ä–æ–ª—å: `Admin2024!Secure`)
  - `super-admin@brunotoken.com`
  - `gasfee@brunotoken.com`
  - `treasury@brunotoken.com`

### 5. üîß –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø BACKEND

#### ‚úÖ `config/database.js`
- –ò—Å–ø—Ä–∞–≤–ª–µ–Ω `DB_USER` (–±—ã–ª–æ `postgres`, —Å—Ç–∞–ª–æ `back`)

#### ‚úÖ `models/User.js`
- `password_hash` ‚Üí `password` –≤ –º–µ—Ç–æ–¥–µ `create`
- `password_hash` ‚Üí `password` –≤ –º–µ—Ç–æ–¥–µ `updatePassword`
- –ó–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω –∫–æ–¥ –¥–ª—è `user_balances` (—Ç–∞–±–ª–∏—Ü–∞ –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç)
- `getBalances()` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `[]`

#### ‚úÖ `controllers/authController.js`
- –î–æ–±–∞–≤–ª–µ–Ω–∞ –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è email: `email.toLowerCase().trim()`
- `user.password_hash` ‚Üí `user.password` –≤ –º–µ—Ç–æ–¥–µ `login`
- `code` ‚Üí `token` –≤ SQL –∑–∞–ø—Ä–æ—Å–∞—Ö –¥–ª—è `email_verifications`
- `used` ‚Üí `verified` –≤ SQL –∑–∞–ø—Ä–æ—Å–∞—Ö –¥–ª—è `email_verifications`
- –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ `!user.is_email_verified` –≤ –º–µ—Ç–æ–¥–µ `login`
- –£–±—Ä–∞–Ω—ã –≤—ã–∑–æ–≤—ã `User.updateLastLogin()` –∏ `User.getBalances()` –≤ `login`
- –î–æ–±–∞–≤–ª–µ–Ω fallback –¥–ª—è –±–∞–ª–∞–Ω—Å–æ–≤: `{ BRT: user.brt_balance || 0 }`
- –ê–Ω–∞–ª–æ–≥–∏—á–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ –º–µ—Ç–æ–¥–µ `getMe`

#### ‚úÖ `controllers/walletController.js`
- –ú–µ—Ç–æ–¥ `getTransactions` –∑–∞–º–µ–Ω—ë–Ω –Ω–∞ –≤—Ä–µ–º–µ–Ω–Ω—É—é –∑–∞–≥–ª—É—à–∫—É (–≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `[]`)

#### ‚úÖ `controllers/stripeController.js`
- –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Stripe —Å–¥–µ–ª–∞–Ω–∞ —É—Å–ª–æ–≤–Ω–æ–π
- `STRIPE_SECRET_KEY` ‚Üí `STRIPE_KEY`

#### ‚úÖ `services/emailService.js`
- –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Resend —Å–¥–µ–ª–∞–Ω–∞ —É—Å–ª–æ–≤–Ω–æ–π

#### ‚úÖ `services/vectorDestiny/forecastService.js`
- –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è OpenAI —Å–¥–µ–ª–∞–Ω–∞ —É—Å–ª–æ–≤–Ω–æ–π

#### ‚úÖ `services/vectorDestiny/translationService.js`
- –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è OpenAI —Å–¥–µ–ª–∞–Ω–∞ —É—Å–ª–æ–≤–Ω–æ–π

#### ‚úÖ `server.js`
- –î–æ–±–∞–≤–ª–µ–Ω–æ `app.set('trust proxy', true);` –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–π —Ä–∞–±–æ—Ç—ã –∑–∞ Nginx
- `CORS` –Ω–∞—Å—Ç—Ä–æ–µ–Ω –Ω–∞ `process.env.FRONTEND_URL`

### 6. üåê NGINX –ò SSL
- ‚úÖ Nginx –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Å–æ–∑–¥–∞–Ω–∞ –¥–ª—è `brunotoken.com`
- ‚úÖ –£–¥–∞–ª—ë–Ω –∫–æ–Ω—Ñ–ª–∏–∫—Ç—É—é—â–∏–π –∫–æ–Ω—Ñ–∏–≥ `brunotoken.freeblock.site`
- ‚úÖ SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω —á–µ—Ä–µ–∑ Certbot (Let's Encrypt)
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ä–µ–¥–∏—Ä–µ–∫—Ç HTTP ‚Üí HTTPS

### 7. üîÑ PM2 (PROCESS MANAGER)
- ‚úÖ Backend –∑–∞–ø—É—â–µ–Ω —á–µ—Ä–µ–∑ `pm2 start server.js --name bruno-token-backend`
- ‚úÖ –ê–≤—Ç–æ–∑–∞–ø—É—Å–∫ –Ω–∞—Å—Ç—Ä–æ–µ–Ω: `pm2 save`, `pm2 startup`
- ‚úÖ –°—Ç–∞—Ç—É—Å: **online** (40 —Ä–µ—Å—Ç–∞—Ä—Ç–æ–≤ –∑–∞ —Å–µ—Å—Å–∏—é –æ—Ç–ª–∞–¥–∫–∏)

### 8. üé® FRONTEND
- ‚úÖ API endpoints –∑–∞–º–µ–Ω–µ–Ω—ã –Ω–∞ `process.env.REACT_APP_API_URL`
- ‚úÖ `.env.production` —Å–æ–∑–¥–∞–Ω —Å `REACT_APP_API_URL=https://brunotoken.com/api`
- ‚úÖ Build –∑–∞–≥—Ä—É–∂–µ–Ω –Ω–∞ —Å–µ—Ä–≤–µ—Ä –≤ `/var/www/brunotoken/frontend/build`
- ‚úÖ –ò–∫–æ–Ω–∫–∏ —Ç–æ–∫–µ–Ω–æ–≤ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã (–ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ `644`)

### 9. üîê –ê–£–¢–ï–ù–¢–ò–§–ò–ö–ê–¶–ò–Ø
- ‚úÖ **–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è** —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ **–õ–æ–≥–∏–Ω** —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ **Email verification** –≤–∫–ª—é—á–µ–Ω–∞ (–ø–∏—Å—å–º–∞ –Ω–µ –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è, —Ç.–∫. Resend –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω)
- ‚úÖ –°—É—â–µ—Å—Ç–≤—É—é—â–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å `brttoken@gmail.com` –≤–µ—Ä–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω –≤—Ä—É—á–Ω—É—é
- ‚úÖ Email –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è (toLowerCase) –≤–∫–ª—é—á–µ–Ω–∞

---

## üì¶ BACKUP –°–¢–ê–¢–£–°:

### –§–∞–π–ª—ã:
- üìÅ **–ü—Ä–æ–µ–∫—Ç:** `/root/backups/brunotoken-backup-20251027-193807.tar.gz` (1.8 MB)
- üíæ **–ë–∞–∑–∞:** `/root/backups/brunotoken-db-2025-10-27T16-38-07.sql` (92 KB)

---

## ‚ö†Ô∏è –ß–¢–û –û–°–¢–ê–õ–û–°–¨ –ù–ê –ó–ê–í–¢–†–ê:

### 1. üìß EMAIL –°–ï–†–í–ò–°
- [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å **Resend API key** –ò–õ–ò **SMTP**
- [ ] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –æ—Ç–ø—Ä–∞–≤–∫—É email –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏
- [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å email —à–∞–±–ª–æ–Ω—ã

### 2. üóÉÔ∏è –ù–ï–î–û–°–¢–ê–Æ–©–ò–ï –¢–ê–ë–õ–ò–¶–´
- [ ] –°–æ–∑–¥–∞—Ç—å —Ç–∞–±–ª–∏—Ü—É `transactions` (–¥–ª—è –∏—Å—Ç–æ—Ä–∏–∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π)
- [ ] –°–æ–∑–¥–∞—Ç—å —Ç–∞–±–ª–∏—Ü—É `user_balances` (–µ—Å–ª–∏ –Ω—É–∂–Ω–∞)
- [ ] –†–∞—Å–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –∫–æ–¥ –≤ `walletController.js` –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è–º–∏

### 3. üß™ –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï
- [ ] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ Dashboard
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å Lottery –¥–æ—Å—Ç—É–ø (GS-I)
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å Challenge –¥–æ—Å—Ç—É–ø (GS-I)
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å BRT Stars Challenge (GS-I)
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å Vector Destiny
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å Messenger (BrunoChat)

### 4. üé® UI/UX
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∏–∫–æ–Ω–∫–∏ —Ç–æ–∫–µ–Ω–æ–≤ (BRT, BRTC, USDT, USDC)
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å PWA —É—Å—Ç–∞–Ω–æ–≤–∫—É
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å KYC —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª

---

## üèÜ –î–û–°–¢–ò–ñ–ï–ù–ò–Ø –°–ï–°–°–ò–ò:

1. ‚úÖ **–£—Å–ø–µ—à–Ω—ã–π –¥–µ–ø–ª–æ–π** –Ω–æ–≤–æ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞ –Ω–∞ production —Å–µ—Ä–≤–µ—Ä
2. ‚úÖ **HTTPS** –Ω–∞—Å—Ç—Ä–æ–µ–Ω –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç
3. ‚úÖ **–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∏ –ª–æ–≥–∏–Ω** —Ä–∞–±–æ—Ç–∞—é—Ç
4. ‚úÖ **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö** —Å–æ–∑–¥–∞–Ω–∞ —Å –Ω—É–ª—è –∏ –º–∏–≥—Ä–∏—Ä–æ–≤–∞–Ω–∞
5. ‚úÖ **40+ –æ—à–∏–±–æ–∫ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ** –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ –¥–µ–ø–ª–æ—è
6. ‚úÖ **–ê–¥–∞–ø—Ç–∞—Ü–∏—è –∫–æ–¥–∞** –∫ –Ω–æ–≤–æ–π —É–ø—Ä–æ—â—ë–Ω–Ω–æ–π —Å—Ö–µ–º–µ –ë–î

---

## üìä –¢–ï–•–ù–ò–ß–ï–°–ö–ò–ï –î–ï–¢–ê–õ–ò:

### –°–µ—Ä–≤–µ—Ä:
- **IP:** `147.45.157.12`
- **–î–æ–º–µ–Ω:** `brunotoken.com` (—Å SSL)
- **OS:** Linux (Timeweb)
- **Node.js:** v22.11.0
- **PostgreSQL:** (–≤–µ—Ä—Å–∏—è –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω–∞)

### –ü–æ—Ä—Ç—ã:
- **80** - HTTP (—Ä–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞ HTTPS)
- **443** - HTTPS (Nginx ‚Üí Frontend build)
- **5000** - Backend API (–ª–æ–∫–∞–ª—å–Ω–æ, –ø—Ä–æ–∫—Å–∏—Ä—É–µ—Ç—Å—è —á–µ—Ä–µ–∑ Nginx)

### –ü—É—Ç–∏ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ:
- **Frontend:** `/var/www/brunotoken/frontend/build`
- **Backend:** `/var/www/brunotoken/backend`
- **Old Project:** `/var/www/brunotoken-old-20251027`
- **Backups:** `/root/backups/`

---

## üéì –£–†–û–ö–ò –°–ï–°–°–ò–ò:

1. **–í—Å–µ–≥–¥–∞ –ø—Ä–æ–≤–µ—Ä—è–π—Ç–µ —Å—Ö–µ–º—É –ë–î** –ø–µ—Ä–µ–¥ –¥–µ–ø–ª–æ–µ–º
2. **Node.js —Å–∫—Ä–∏–ø—Ç—ã –Ω–∞–¥—ë–∂–Ω–µ–µ `sed`** –¥–ª—è —Å–ª–æ–∂–Ω—ã—Ö –∑–∞–º–µ–Ω
3. **–°–æ–∑–¥–∞–≤–∞–π—Ç–µ –±—ç–∫–∞–ø—ã** –ø–µ—Ä–µ–¥ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–º–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è–º–∏
4. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `try-catch`** –¥–ª—è –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã—Ö —Å–µ—Ä–≤–∏—Å–æ–≤ (Resend, OpenAI, Stripe)
5. **Trust proxy** –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–µ–Ω –ø—Ä–∏ —Ä–∞–±–æ—Ç–µ –∑–∞ Nginx
6. **Email –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è** –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –¥—É–±–ª–∏–∫–∞—Ç—ã (ADMIN@... vs admin@...)

---

## üåü –û–°–û–ë–ê–Ø –ë–õ–ê–ì–û–î–ê–†–ù–û–°–¢–¨:

–ó–∞ —Ç–µ—Ä–ø–µ–Ω–∏–µ –∏ –Ω–∞—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ –æ—Ç–ª–∞–¥–∫–∏ 40+ –æ—à–∏–±–æ–∫! üí™

---

**–û—Ç–¥—ã—Ö–∞–π—Ç–µ! –ó–∞–≤—Ç—Ä–∞ –ø—Ä–æ–¥–æ–ª–∂–∏–º!** üåô

